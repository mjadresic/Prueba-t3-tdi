"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/etl";
exports.ids = ["pages/api/etl"];
exports.modules = {

/***/ "@google-cloud/storage":
/*!****************************************!*\
  !*** external "@google-cloud/storage" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@google-cloud/storage");

/***/ }),

/***/ "csv-parse/sync":
/*!*********************************!*\
  !*** external "csv-parse/sync" ***!
  \*********************************/
/***/ ((module) => {

module.exports = import("csv-parse/sync");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./pages/api/etl.js":
/*!**************************!*\
  !*** ./pages/api/etl.js ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _google_cloud_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google-cloud/storage */ \"@google-cloud/storage\");\n/* harmony import */ var _google_cloud_storage__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_google_cloud_storage__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var csv_parse_sync__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! csv-parse/sync */ \"csv-parse/sync\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([csv_parse_sync__WEBPACK_IMPORTED_MODULE_1__]);\ncsv_parse_sync__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nconst BUCKET_NAME = '2024-1-tarea-3';\nconst GOOGLE_APPLICATION_CREDENTIALS = {\n    type: 'service_account',\n    project_id: 'taller-integracion-310700',\n    private_key_id: '41f361102b8be3e3df3613da4fef1c47f02f6d90',\n    private_key: '-----BEGIN PRIVATE KEY-----\\nMIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQDR16z8s1laceUo\\nOWx+hyT5stigMaXXnrue/wzL/+ld1wrds/tpsL0btKHMjwR2GAj0DqzQ/lTTrJgj\\n9ItGoAYXjq6acAgOLC1pKwJS9U5MGmNIJfODEwajneEydM+ORymVBW8PMGGuVGSc\\nZ1XSNrJ66sMcXikOsVg7BvpGtf9bnGQvPaVN5JIrbv0TW3dQzxLkOesOrgWx5Lle\\nGuK5KUbtaWWQasxqICGBiVaWzKSIALlPYwe9RsqKi+Asrp4J8AY8EKsf7SHdj/SO\\ngDmvImCJw183PPe8gSTeMWIkWuisbHDL2gK8jE8ZGmco9KtnS2D/W5O8O5UJVCHY\\n5Ww9KEQ/AgMBAAECggEAEO1DXH0BI60VTZnYORqgrm2xULbAiHSa8NflCd2iTvoG\\nO90FVkC1+HKpLI2K0BXfPwSiBxfE8vA0s43J4FAPPb46MmYAGFiS7y1TeiqkfroQ\\nMSUyj+useO1G2aGXjoQKBCXUkBaYgo33MbCaOSNFYWnnhDXKPQ+sLNLCxIpwx0xg\\nO/+fDIVCDDiPlNBM1h2Yepdr87bHUVComBhJ/8XYBFRSEM47s6ZUXDnKZG37Vs20\\ncW48UkdhkRxJiVWTyjghppkaR6e1j/jpc2m40CqZDN34oFhx6XlNFVb1r/4WFJOg\\noXlSBxJFPHZzHKgpXGtqVjBzdYEH5jdD85Cy9E5j8QKBgQD63ESIqME3jH009559\\n3EHYdrxksompb2bhojO2oYi+Tn3lWJfsiB1HMybFrLFWS79UrMKFSEQ4/bf/46Nw\\nbVxMrGWgvgXkGA6Apsc+kgJFUPLdUvUap1vL1xULpwe83J+4s5xm8wvFxaMh1QBI\\n0jWpBgE60xmIPNMaRYfJKb+iDwKBgQDWJEYhQ0exnioV6NlYJ6fbh4YR3dBK60Ex\\nyuulovpx/3B1GS4n32UI0OI7xbJtgRb8IIYhPiJqZhH/ooD3bwNBJAfgrQLn4WyP\\nnOWwz4c92QEN00eugF+NWCwlukdsq1+0MQln9AFIw4+ynljFDRfo2q+Ri9FtOcqz\\nUu2/43mq0QKBgQCcnus2+01u9gqyCCtu3xZJJJCougNSwtfT5aYtzxqF3pGhoDdy\\nGOVWr6v0XMZ3X2F8Z0QnXKAjiNzZKXHAXrbys+vbeOhKqW5cikP5X8WFK24GGqYm\\n1vhsAsQD+2vMUV5zPchXSkU+XA9mrwq3bG7OMY6RAH1/XqJaU7DcOnGHpwKBgQC0\\nylczCfxjZqcdbELi/EfpPZfhSaXrOocGJM2iP+C1kfU9x46CN0azlLcLw7MKZGwl\\nXMghFLY1ogscCfRb8iuLOYI1G5xSbK0c6le5WNxTSPxs0a25E8SYLpLHH2fhxSW9\\nmZDZZNYYupJ9ONa1NoKzIr4LYUHkt1/82czDrqcvoQKBgQCwFaEc2Sh/tPi7n1Dk\\nxAn4jR1+V8QPt/s3qHpSi6yRf5xSYRPfOOFsFhXt7TahE/gee35nPM90hKklrY0q\\nvXgjIzRlWwwGudOVU5YBYWb7X2j+8bjOyRHKSDuiGEH3llyI/U+tmKaHfY47RzHY\\ndRlJU5BPRU4PlbuMYsLMFfdVUw==\\n-----END PRIVATE KEY-----\\n',\n    client_email: 'acceso-bucket-alumnos-tarea-3@taller-integracion-310700.iam.gserviceaccount.com',\n    client_id: '100374981212003440652',\n    auth_uri: 'https://accounts.google.com/o/oauth2/auth',\n    token_uri: 'https://oauth2.googleapis.com/token',\n    auth_provider_x509_cert_url: 'https://www.googleapis.com/oauth2/v1/certs',\n    client_x509_cert_url: 'https://www.googleapis.com/robot/v1/metadata/x509/acceso-bucket-alumnos-tarea-3%40taller-integracion-310700.iam.gserviceaccount.com'\n};\nasync function handler(req, res) {\n    console.log('Starting ETL and data compilation process');\n    const storage = new _google_cloud_storage__WEBPACK_IMPORTED_MODULE_0__.Storage({\n        projectId: GOOGLE_APPLICATION_CREDENTIALS.project_id,\n        credentials: GOOGLE_APPLICATION_CREDENTIALS\n    });\n    const bucket = storage.bucket(BUCKET_NAME);\n    const products = [];\n    const ordersByYear = {};\n    try {\n        console.log('Attempting to retrieve files from bucket');\n        const [files] = await bucket.getFiles();\n        console.log('Files retrieved from bucket:', files.map((file)=>file.name\n        ));\n        console.log(\"Downloading...\");\n        for (const file1 of files){\n            const [data] = await file1.download();\n            if (file1.name.includes('products')) {\n                const productData = JSON.parse(data.toString());\n                products.push(...productData);\n                console.log(`File ${file1.name} downloaded`);\n            } else if (file1.name.includes('orders')) {\n                const yearMatch = file1.name.match(/orders\\/(\\d{4})\\//);\n                if (yearMatch) {\n                    const year = yearMatch[1];\n                    if (!ordersByYear[year]) {\n                        ordersByYear[year] = [];\n                    }\n                    try {\n                        const parsedData = (0,csv_parse_sync__WEBPACK_IMPORTED_MODULE_1__.parse)(data.toString(), {\n                            columns: true,\n                            skip_empty_lines: true,\n                            delimiter: ';'\n                        });\n                        ordersByYear[year].push(...parsedData.map((record, index)=>{\n                            return {\n                                order_id: record.order_id || `missing_order_id_${index + 1}`,\n                                customer_id: record.customer_id || `missing_customer_id_${index + 1}`,\n                                quantity: record.quantity ? parseInt(record.quantity.replace(',', '.'), 10) : 1,\n                                price_MRP: record.price_MRP ? parseFloat(record.price_MRP.replace(',', '.')) : 0,\n                                payment: record.payment ? parseFloat(record.payment.replace(',', '.')) : 0,\n                                timestamp: record.timestamp || '1970-01-01 00:00:00',\n                                rating: record.rating ? parseInt(record.rating, 10) : 0,\n                                product_category: record.product_category || 'unknown',\n                                product_id: record.product_id || 'NULL',\n                                payment_type: record.payment_type || 'unknown',\n                                order_status: record.order_status || 'unknown',\n                                product_weight_g: record.product_weight_g ? parseFloat(record.product_weight_g.replace(',', '.')) : 0,\n                                product_length_cm: record.product_length_cm ? parseFloat(record.product_length_cm.replace(',', '.')) : 0,\n                                product_height_cm: record.product_height_cm ? parseFloat(record.product_height_cm.replace(',', '.')) : 0,\n                                product_width_cm: record.product_width_cm ? parseFloat(record.product_width_cm.replace(',', '.')) : 0,\n                                customer_city: record.customer_city || 'unknown',\n                                customer_state: record.customer_state || 'unknown',\n                                seller_id: record.seller_id || `missing_seller_id_${index + 1}`,\n                                seller_city: record.seller_city || 'unknown',\n                                seller_state: record.seller_state || 'unknown',\n                                payment_installments: record.payment_installments ? parseInt(record.payment_installments, 10) : 1\n                            };\n                        }));\n                    } catch (parseError) {\n                        console.error(`Error parsing file ${file1.name}:`, parseError);\n                        return res.status(500).json({\n                            error: `Error parsing file ${file1.name}: ${parseError.message}`\n                        });\n                    }\n                }\n            }\n        }\n        console.log('Data parsed successfully');\n        // Concatenate all orders from different years into a single array\n        const allOrders = Object.values(ordersByYear).flat();\n        // Remove duplicate products\n        const productSet = new Set();\n        const cleanProducts = products.filter((product)=>{\n            if (productSet.has(product.objectID)) {\n                return false; // Skip duplicate\n            } else {\n                productSet.add(product.objectID);\n                return true; // Keep unique\n            }\n        }).map((product)=>{\n            var ref, ref1, ref2, ref3;\n            return {\n                objectID: product.objectID || 'Unknown',\n                name: product.name || 'Unknown',\n                description: product.description || 'No description available',\n                brand: product.brand || 'Unknown brand',\n                categories: product.categories || [],\n                hierarchicalCategories: {\n                    lvl0: ((ref = product.hierarchicalCategories) === null || ref === void 0 ? void 0 : ref.lvl0) || 'Unknown',\n                    lvl1: ((ref1 = product.hierarchicalCategories) === null || ref1 === void 0 ? void 0 : ref1.lvl1) || 'Unknown',\n                    lvl2: ((ref2 = product.hierarchicalCategories) === null || ref2 === void 0 ? void 0 : ref2.lvl2) || 'Unknown',\n                    lvl3: ((ref3 = product.hierarchicalCategories) === null || ref3 === void 0 ? void 0 : ref3.lvl3) || 'Unknown'\n                },\n                type: product.type || 'Unknown type',\n                price: product.price || 0,\n                price_range: product.price_range || 'Unknown',\n                image: product.image || 'No image available',\n                url: product.url || 'No URL available',\n                free_shipping: product.free_shipping !== undefined ? product.free_shipping : false,\n                popularity: product.popularity || 0,\n                rating: product.rating || 0\n            };\n        });\n        // Remove duplicate orders\n        const orderSet = new Set();\n        const cleanOrders = allOrders.filter((order)=>{\n            if (orderSet.has(order.order_id)) {\n                return false; // Skip duplicate\n            } else {\n                orderSet.add(order.order_id);\n                return true; // Keep unique\n            }\n        }).map((order)=>({\n                ...order,\n                quantity: order.quantity || 1,\n                price_MRP: order.price_MRP || 0,\n                payment: order.payment || 0,\n                rating: order.rating || 0\n            })\n        );\n        console.log('Writing cleaned data to files');\n        fs__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), 'public', 'products.json'), JSON.stringify(cleanProducts));\n        fs__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), 'public', 'orders.json'), JSON.stringify(cleanOrders));\n        console.log('Files written successfully');\n        // Log a summary of orders grouped by year\n        for (const year of Object.keys(ordersByYear)){\n            console.log(`File orders/${year}/* downloaded`);\n        }\n        res.status(200).json({\n            message: 'ETL and data compilation process completed successfully'\n        });\n    } catch (error) {\n        console.error('Error during ETL and data compilation process:', error);\n        res.status(500).json({\n            error: error.message\n        });\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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OztRQUVEdEMsT0FBTyxDQUFDQyxHQUFHLENBQUMsQ0FBK0I7UUFDM0NsQix1REFBZ0IsQ0FBQ0MsZ0RBQVMsQ0FBQzBHLE9BQU8sQ0FBQ0MsR0FBRyxJQUFJLENBQVEsU0FBRSxDQUFlLGlCQUFHMUUsSUFBSSxDQUFDMkUsU0FBUyxDQUFDNUIsYUFBYTtRQUNsR2pGLHVEQUFnQixDQUFDQyxnREFBUyxDQUFDMEcsT0FBTyxDQUFDQyxHQUFHLElBQUksQ0FBUSxTQUFFLENBQWEsZUFBRzFFLElBQUksQ0FBQzJFLFNBQVMsQ0FBQ04sV0FBVztRQUU5RnRGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLENBQTRCO1FBRXhDLEVBQTBDO1FBQzFDLEdBQUcsRUFBRSxLQUFLLENBQUNxQixJQUFJLElBQUlxQyxNQUFNLENBQUNrQyxJQUFJLENBQUN0RixZQUFZLEVBQUcsQ0FBQztZQUM3Q1AsT0FBTyxDQUFDQyxHQUFHLEVBQUUsWUFBWSxFQUFFcUIsSUFBSSxDQUFDLGFBQWE7UUFDL0MsQ0FBQztRQUVEdkIsR0FBRyxDQUFDd0QsTUFBTSxDQUFDLEdBQUcsRUFBRUMsSUFBSSxDQUFDLENBQUM7WUFBQ0MsT0FBTyxFQUFFLENBQXlEO1FBQUMsQ0FBQztJQUM3RixDQUFDLENBQUMsS0FBSyxFQUFFSCxLQUFLLEVBQUUsQ0FBQztRQUNmdEQsT0FBTyxDQUFDc0QsS0FBSyxDQUFDLENBQWdELGlEQUFFQSxLQUFLO1FBQ3JFdkQsR0FBRyxDQUFDd0QsTUFBTSxDQUFDLEdBQUcsRUFBRUMsSUFBSSxDQUFDLENBQUM7WUFBQ0YsS0FBSyxFQUFFQSxLQUFLLENBQUNHLE9BQU87UUFBQyxDQUFDO0lBQy9DLENBQUM7QUFDSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktZGFzaGJvYXJkLy4vcGFnZXMvYXBpL2V0bC5qcz9hMmNhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0b3JhZ2UgfSBmcm9tICdAZ29vZ2xlLWNsb3VkL3N0b3JhZ2UnO1xyXG5pbXBvcnQgeyBwYXJzZSB9IGZyb20gJ2Nzdi1wYXJzZS9zeW5jJztcclxuaW1wb3J0IGZzIGZyb20gJ2ZzJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcblxyXG5jb25zdCBCVUNLRVRfTkFNRSA9ICcyMDI0LTEtdGFyZWEtMyc7XHJcbmNvbnN0IEdPT0dMRV9BUFBMSUNBVElPTl9DUkVERU5USUFMUyA9IHtcclxuICB0eXBlOiAnc2VydmljZV9hY2NvdW50JyxcclxuICBwcm9qZWN0X2lkOiAndGFsbGVyLWludGVncmFjaW9uLTMxMDcwMCcsXHJcbiAgcHJpdmF0ZV9rZXlfaWQ6ICc0MWYzNjExMDJiOGJlM2UzZGYzNjEzZGE0ZmVmMWM0N2YwMmY2ZDkwJyxcclxuICBwcml2YXRlX2tleTogJy0tLS0tQkVHSU4gUFJJVkFURSBLRVktLS0tLVxcbk1JSUV2d0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktrd2dnU2xBZ0VBQW9JQkFRRFIxNno4czFsYWNlVW9cXG5PV3graHlUNXN0aWdNYVhYbnJ1ZS93ekwvK2xkMXdyZHMvdHBzTDBidEtITWp3UjJHQWowRHF6US9sVFRySmdqXFxuOUl0R29BWVhqcTZhY0FnT0xDMXBLd0pTOVU1TUdtTklKZk9ERXdham5lRXlkTStPUnltVkJXOFBNR0d1VkdTY1xcbloxWFNOcko2NnNNY1hpa09zVmc3QnZwR3RmOWJuR1F2UGFWTjVKSXJidjBUVzNkUXp4TGtPZXNPcmdXeDVMbGVcXG5HdUs1S1VidGFXV1Fhc3hxSUNHQmlWYVd6S1NJQUxsUFl3ZTlSc3FLaStBc3JwNEo4QVk4RUtzZjdTSGRqL1NPXFxuZ0RtdkltQ0p3MTgzUFBlOGdTVGVNV0lrV3Vpc2JIREwyZ0s4akU4WkdtY285S3RuUzJEL1c1TzhPNVVKVkNIWVxcbjVXdzlLRVEvQWdNQkFBRUNnZ0VBRU8xRFhIMEJJNjBWVFpuWU9ScWdybTJ4VUxiQWlIU2E4TmZsQ2QyaVR2b0dcXG5POTBGVmtDMStIS3BMSTJLMEJYZlB3U2lCeGZFOHZBMHM0M0o0RkFQUGI0Nk1tWUFHRmlTN3kxVGVpcWtmcm9RXFxuTVNVeWordXNlTzFHMmFHWGpvUUtCQ1hVa0JhWWdvMzNNYkNhT1NORllXbm5oRFhLUFErc0xOTEN4SXB3eDB4Z1xcbk8vK2ZESVZDRERpUGxOQk0xaDJZZXBkcjg3YkhVVkNvbUJoSi84WFlCRlJTRU00N3M2WlVYRG5LWkczN1ZzMjBcXG5jVzQ4VWtkaGtSeEppVldUeWpnaHBwa2FSNmUxai9qcGMybTQwQ3FaRE4zNG9GaHg2WGxORlZiMXIvNFdGSk9nXFxub1hsU0J4SkZQSFp6SEtncFhHdHFWakJ6ZFlFSDVqZEQ4NUN5OUU1ajhRS0JnUUQ2M0VTSXFNRTNqSDAwOTU1OVxcbjNFSFlkcnhrc29tcGIyYmhvak8yb1lpK1RuM2xXSmZzaUIxSE15YkZyTEZXUzc5VXJNS0ZTRVE0L2JmLzQ2TndcXG5iVnhNckdXZ3ZnWGtHQTZBcHNjK2tnSkZVUExkVXZVYXAxdkwxeFVMcHdlODNKKzRzNXhtOHd2RnhhTWgxUUJJXFxuMGpXcEJnRTYweG1JUE5NYVJZZkpLYitpRHdLQmdRRFdKRVloUTBleG5pb1Y2TmxZSjZmYmg0WVIzZEJLNjBFeFxcbnl1dWxvdnB4LzNCMUdTNG4zMlVJME9JN3hiSnRnUmI4SUlZaFBpSnFaaEgvb29EM2J3TkJKQWZnclFMbjRXeVBcXG5uT1d3ejRjOTJRRU4wMGV1Z0YrTldDd2x1a2RzcTErME1RbG45QUZJdzQreW5sakZEUmZvMnErUmk5RnRPY3F6XFxuVXUyLzQzbXEwUUtCZ1FDY251czIrMDF1OWdxeUNDdHUzeFpKSkpDb3VnTlN3dGZUNWFZdHp4cUYzcEdob0RkeVxcbkdPVldyNnYwWE1aM1gyRjhaMFFuWEtBamlOelpLWEhBWHJieXMrdmJlT2hLcVc1Y2lrUDVYOFdGSzI0R0dxWW1cXG4xdmhzQXNRRCsydk1VVjV6UGNoWFNrVStYQTltcndxM2JHN09NWTZSQUgxL1hxSmFVN0RjT25HSHB3S0JnUUMwXFxueWxjekNmeGpacWNkYkVMaS9FZnBQWmZoU2FYck9vY0dKTTJpUCtDMWtmVTl4NDZDTjBhemxMY0x3N01LWkd3bFxcblhNZ2hGTFkxb2dzY0NmUmI4aXVMT1lJMUc1eFNiSzBjNmxlNVdOeFRTUHhzMGEyNUU4U1lMcExISDJmaHhTVzlcXG5tWkRaWk5ZWXVwSjlPTmExTm9LeklyNExZVUhrdDEvODJjekRycWN2b1FLQmdRQ3dGYUVjMlNoL3RQaTduMURrXFxueEFuNGpSMStWOFFQdC9zM3FIcFNpNnlSZjV4U1lSUGZPT0ZzRmhYdDdUYWhFL2dlZTM1blBNOTBoS2tsclkwcVxcbnZYZ2pJelJsV3d3R3VkT1ZVNVlCWVdiN1gyais4YmpPeVJIS1NEdWlHRUgzbGx5SS9VK3RtS2FIZlk0N1J6SFlcXG5kUmxKVTVCUFJVNFBsYnVNWXNMTUZmZFZVdz09XFxuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxcbicsXHJcbiAgY2xpZW50X2VtYWlsOiAnYWNjZXNvLWJ1Y2tldC1hbHVtbm9zLXRhcmVhLTNAdGFsbGVyLWludGVncmFjaW9uLTMxMDcwMC5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbScsXHJcbiAgY2xpZW50X2lkOiAnMTAwMzc0OTgxMjEyMDAzNDQwNjUyJyxcclxuICBhdXRoX3VyaTogJ2h0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi9hdXRoJyxcclxuICB0b2tlbl91cmk6ICdodHRwczovL29hdXRoMi5nb29nbGVhcGlzLmNvbS90b2tlbicsXHJcbiAgYXV0aF9wcm92aWRlcl94NTA5X2NlcnRfdXJsOiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YxL2NlcnRzJyxcclxuICBjbGllbnRfeDUwOV9jZXJ0X3VybDogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3JvYm90L3YxL21ldGFkYXRhL3g1MDkvYWNjZXNvLWJ1Y2tldC1hbHVtbm9zLXRhcmVhLTMlNDB0YWxsZXItaW50ZWdyYWNpb24tMzEwNzAwLmlhbS5nc2VydmljZWFjY291bnQuY29tJyxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBjb25zb2xlLmxvZygnU3RhcnRpbmcgRVRMIGFuZCBkYXRhIGNvbXBpbGF0aW9uIHByb2Nlc3MnKTtcclxuXHJcbiAgY29uc3Qgc3RvcmFnZSA9IG5ldyBTdG9yYWdlKHtcclxuICAgIHByb2plY3RJZDogR09PR0xFX0FQUExJQ0FUSU9OX0NSRURFTlRJQUxTLnByb2plY3RfaWQsXHJcbiAgICBjcmVkZW50aWFsczogR09PR0xFX0FQUExJQ0FUSU9OX0NSRURFTlRJQUxTLFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBidWNrZXQgPSBzdG9yYWdlLmJ1Y2tldChCVUNLRVRfTkFNRSk7XHJcblxyXG4gIGNvbnN0IHByb2R1Y3RzID0gW107XHJcbiAgY29uc3Qgb3JkZXJzQnlZZWFyID0ge307XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyB0byByZXRyaWV2ZSBmaWxlcyBmcm9tIGJ1Y2tldCcpO1xyXG4gICAgY29uc3QgW2ZpbGVzXSA9IGF3YWl0IGJ1Y2tldC5nZXRGaWxlcygpO1xyXG4gICAgY29uc29sZS5sb2coJ0ZpbGVzIHJldHJpZXZlZCBmcm9tIGJ1Y2tldDonLCBmaWxlcy5tYXAoZmlsZSA9PiBmaWxlLm5hbWUpKTtcclxuICAgIGNvbnNvbGUubG9nKFwiRG93bmxvYWRpbmcuLi5cIik7XHJcblxyXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XHJcbiAgICAgIGNvbnN0IFtkYXRhXSA9IGF3YWl0IGZpbGUuZG93bmxvYWQoKTtcclxuXHJcbiAgICAgIGlmIChmaWxlLm5hbWUuaW5jbHVkZXMoJ3Byb2R1Y3RzJykpIHtcclxuICAgICAgICBjb25zdCBwcm9kdWN0RGF0YSA9IEpTT04ucGFyc2UoZGF0YS50b1N0cmluZygpKTtcclxuICAgICAgICBwcm9kdWN0cy5wdXNoKC4uLnByb2R1Y3REYXRhKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhgRmlsZSAke2ZpbGUubmFtZX0gZG93bmxvYWRlZGApO1xyXG4gICAgICB9IGVsc2UgaWYgKGZpbGUubmFtZS5pbmNsdWRlcygnb3JkZXJzJykpIHtcclxuICAgICAgICBjb25zdCB5ZWFyTWF0Y2ggPSBmaWxlLm5hbWUubWF0Y2goL29yZGVyc1xcLyhcXGR7NH0pXFwvLyk7XHJcbiAgICAgICAgaWYgKHllYXJNYXRjaCkge1xyXG4gICAgICAgICAgY29uc3QgeWVhciA9IHllYXJNYXRjaFsxXTtcclxuICAgICAgICAgIGlmICghb3JkZXJzQnlZZWFyW3llYXJdKSB7XHJcbiAgICAgICAgICAgIG9yZGVyc0J5WWVhclt5ZWFyXSA9IFtdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IHBhcnNlKGRhdGEudG9TdHJpbmcoKSwge1xyXG4gICAgICAgICAgICAgIGNvbHVtbnM6IHRydWUsXHJcbiAgICAgICAgICAgICAgc2tpcF9lbXB0eV9saW5lczogdHJ1ZSxcclxuICAgICAgICAgICAgICBkZWxpbWl0ZXI6ICc7JyxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBvcmRlcnNCeVllYXJbeWVhcl0ucHVzaCguLi5wYXJzZWREYXRhLm1hcCgocmVjb3JkLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBvcmRlcl9pZDogcmVjb3JkLm9yZGVyX2lkIHx8IGBtaXNzaW5nX29yZGVyX2lkXyR7aW5kZXggKyAxfWAsXHJcbiAgICAgICAgICAgICAgICBjdXN0b21lcl9pZDogcmVjb3JkLmN1c3RvbWVyX2lkIHx8IGBtaXNzaW5nX2N1c3RvbWVyX2lkXyR7aW5kZXggKyAxfWAsXHJcbiAgICAgICAgICAgICAgICBxdWFudGl0eTogcmVjb3JkLnF1YW50aXR5ID8gcGFyc2VJbnQocmVjb3JkLnF1YW50aXR5LnJlcGxhY2UoJywnLCAnLicpLCAxMCkgOiAxLFxyXG4gICAgICAgICAgICAgICAgcHJpY2VfTVJQOiByZWNvcmQucHJpY2VfTVJQID8gcGFyc2VGbG9hdChyZWNvcmQucHJpY2VfTVJQLnJlcGxhY2UoJywnLCAnLicpKSA6IDAsXHJcbiAgICAgICAgICAgICAgICBwYXltZW50OiByZWNvcmQucGF5bWVudCA/IHBhcnNlRmxvYXQocmVjb3JkLnBheW1lbnQucmVwbGFjZSgnLCcsICcuJykpIDogMCxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogcmVjb3JkLnRpbWVzdGFtcCB8fCAnMTk3MC0wMS0wMSAwMDowMDowMCcsXHJcbiAgICAgICAgICAgICAgICByYXRpbmc6IHJlY29yZC5yYXRpbmcgPyBwYXJzZUludChyZWNvcmQucmF0aW5nLCAxMCkgOiAwLFxyXG4gICAgICAgICAgICAgICAgcHJvZHVjdF9jYXRlZ29yeTogcmVjb3JkLnByb2R1Y3RfY2F0ZWdvcnkgfHwgJ3Vua25vd24nLFxyXG4gICAgICAgICAgICAgICAgcHJvZHVjdF9pZDogcmVjb3JkLnByb2R1Y3RfaWQgfHwgJ05VTEwnLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudF90eXBlOiByZWNvcmQucGF5bWVudF90eXBlIHx8ICd1bmtub3duJyxcclxuICAgICAgICAgICAgICAgIG9yZGVyX3N0YXR1czogcmVjb3JkLm9yZGVyX3N0YXR1cyB8fCAndW5rbm93bicsXHJcbiAgICAgICAgICAgICAgICBwcm9kdWN0X3dlaWdodF9nOiByZWNvcmQucHJvZHVjdF93ZWlnaHRfZyA/IHBhcnNlRmxvYXQocmVjb3JkLnByb2R1Y3Rfd2VpZ2h0X2cucmVwbGFjZSgnLCcsICcuJykpIDogMCxcclxuICAgICAgICAgICAgICAgIHByb2R1Y3RfbGVuZ3RoX2NtOiByZWNvcmQucHJvZHVjdF9sZW5ndGhfY20gPyBwYXJzZUZsb2F0KHJlY29yZC5wcm9kdWN0X2xlbmd0aF9jbS5yZXBsYWNlKCcsJywgJy4nKSkgOiAwLFxyXG4gICAgICAgICAgICAgICAgcHJvZHVjdF9oZWlnaHRfY206IHJlY29yZC5wcm9kdWN0X2hlaWdodF9jbSA/IHBhcnNlRmxvYXQocmVjb3JkLnByb2R1Y3RfaGVpZ2h0X2NtLnJlcGxhY2UoJywnLCAnLicpKSA6IDAsXHJcbiAgICAgICAgICAgICAgICBwcm9kdWN0X3dpZHRoX2NtOiByZWNvcmQucHJvZHVjdF93aWR0aF9jbSA/IHBhcnNlRmxvYXQocmVjb3JkLnByb2R1Y3Rfd2lkdGhfY20ucmVwbGFjZSgnLCcsICcuJykpIDogMCxcclxuICAgICAgICAgICAgICAgIGN1c3RvbWVyX2NpdHk6IHJlY29yZC5jdXN0b21lcl9jaXR5IHx8ICd1bmtub3duJyxcclxuICAgICAgICAgICAgICAgIGN1c3RvbWVyX3N0YXRlOiByZWNvcmQuY3VzdG9tZXJfc3RhdGUgfHwgJ3Vua25vd24nLFxyXG4gICAgICAgICAgICAgICAgc2VsbGVyX2lkOiByZWNvcmQuc2VsbGVyX2lkIHx8IGBtaXNzaW5nX3NlbGxlcl9pZF8ke2luZGV4ICsgMX1gLFxyXG4gICAgICAgICAgICAgICAgc2VsbGVyX2NpdHk6IHJlY29yZC5zZWxsZXJfY2l0eSB8fCAndW5rbm93bicsXHJcbiAgICAgICAgICAgICAgICBzZWxsZXJfc3RhdGU6IHJlY29yZC5zZWxsZXJfc3RhdGUgfHwgJ3Vua25vd24nLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudF9pbnN0YWxsbWVudHM6IHJlY29yZC5wYXltZW50X2luc3RhbGxtZW50cyA/IHBhcnNlSW50KHJlY29yZC5wYXltZW50X2luc3RhbGxtZW50cywgMTApIDogMSxcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHBhcnNpbmcgZmlsZSAke2ZpbGUubmFtZX06YCwgcGFyc2VFcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBgRXJyb3IgcGFyc2luZyBmaWxlICR7ZmlsZS5uYW1lfTogJHtwYXJzZUVycm9yLm1lc3NhZ2V9YCB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnRGF0YSBwYXJzZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcblxyXG4gICAgLy8gQ29uY2F0ZW5hdGUgYWxsIG9yZGVycyBmcm9tIGRpZmZlcmVudCB5ZWFycyBpbnRvIGEgc2luZ2xlIGFycmF5XHJcbiAgICBjb25zdCBhbGxPcmRlcnMgPSBPYmplY3QudmFsdWVzKG9yZGVyc0J5WWVhcikuZmxhdCgpO1xyXG5cclxuICAgIC8vIFJlbW92ZSBkdXBsaWNhdGUgcHJvZHVjdHNcclxuICAgIGNvbnN0IHByb2R1Y3RTZXQgPSBuZXcgU2V0KCk7XHJcbiAgICBjb25zdCBjbGVhblByb2R1Y3RzID0gcHJvZHVjdHMuZmlsdGVyKHByb2R1Y3QgPT4ge1xyXG4gICAgICBpZiAocHJvZHVjdFNldC5oYXMocHJvZHVjdC5vYmplY3RJRCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7IC8vIFNraXAgZHVwbGljYXRlXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcHJvZHVjdFNldC5hZGQocHJvZHVjdC5vYmplY3RJRCk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIEtlZXAgdW5pcXVlXHJcbiAgICAgIH1cclxuICAgIH0pLm1hcChwcm9kdWN0ID0+ICh7XHJcbiAgICAgIG9iamVjdElEOiBwcm9kdWN0Lm9iamVjdElEIHx8ICdVbmtub3duJyxcclxuICAgICAgbmFtZTogcHJvZHVjdC5uYW1lIHx8ICdVbmtub3duJyxcclxuICAgICAgZGVzY3JpcHRpb246IHByb2R1Y3QuZGVzY3JpcHRpb24gfHwgJ05vIGRlc2NyaXB0aW9uIGF2YWlsYWJsZScsXHJcbiAgICAgIGJyYW5kOiBwcm9kdWN0LmJyYW5kIHx8ICdVbmtub3duIGJyYW5kJyxcclxuICAgICAgY2F0ZWdvcmllczogcHJvZHVjdC5jYXRlZ29yaWVzIHx8IFtdLFxyXG4gICAgICBoaWVyYXJjaGljYWxDYXRlZ29yaWVzOiB7XHJcbiAgICAgICAgbHZsMDogcHJvZHVjdC5oaWVyYXJjaGljYWxDYXRlZ29yaWVzPy5sdmwwIHx8ICdVbmtub3duJyxcclxuICAgICAgICBsdmwxOiBwcm9kdWN0LmhpZXJhcmNoaWNhbENhdGVnb3JpZXM/Lmx2bDEgfHwgJ1Vua25vd24nLFxyXG4gICAgICAgIGx2bDI6IHByb2R1Y3QuaGllcmFyY2hpY2FsQ2F0ZWdvcmllcz8ubHZsMiB8fCAnVW5rbm93bicsXHJcbiAgICAgICAgbHZsMzogcHJvZHVjdC5oaWVyYXJjaGljYWxDYXRlZ29yaWVzPy5sdmwzIHx8ICdVbmtub3duJyxcclxuICAgICAgfSxcclxuICAgICAgdHlwZTogcHJvZHVjdC50eXBlIHx8ICdVbmtub3duIHR5cGUnLFxyXG4gICAgICBwcmljZTogcHJvZHVjdC5wcmljZSB8fCAwLFxyXG4gICAgICBwcmljZV9yYW5nZTogcHJvZHVjdC5wcmljZV9yYW5nZSB8fCAnVW5rbm93bicsXHJcbiAgICAgIGltYWdlOiBwcm9kdWN0LmltYWdlIHx8ICdObyBpbWFnZSBhdmFpbGFibGUnLFxyXG4gICAgICB1cmw6IHByb2R1Y3QudXJsIHx8ICdObyBVUkwgYXZhaWxhYmxlJyxcclxuICAgICAgZnJlZV9zaGlwcGluZzogcHJvZHVjdC5mcmVlX3NoaXBwaW5nICE9PSB1bmRlZmluZWQgPyBwcm9kdWN0LmZyZWVfc2hpcHBpbmcgOiBmYWxzZSxcclxuICAgICAgcG9wdWxhcml0eTogcHJvZHVjdC5wb3B1bGFyaXR5IHx8IDAsXHJcbiAgICAgIHJhdGluZzogcHJvZHVjdC5yYXRpbmcgfHwgMCxcclxuICAgIH0pKTtcclxuXHJcbiAgICAvLyBSZW1vdmUgZHVwbGljYXRlIG9yZGVyc1xyXG4gICAgY29uc3Qgb3JkZXJTZXQgPSBuZXcgU2V0KCk7XHJcbiAgICBjb25zdCBjbGVhbk9yZGVycyA9IGFsbE9yZGVycy5maWx0ZXIob3JkZXIgPT4ge1xyXG4gICAgICBpZiAob3JkZXJTZXQuaGFzKG9yZGVyLm9yZGVyX2lkKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gU2tpcCBkdXBsaWNhdGVcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBvcmRlclNldC5hZGQob3JkZXIub3JkZXJfaWQpO1xyXG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBLZWVwIHVuaXF1ZVxyXG4gICAgICB9XHJcbiAgICB9KS5tYXAob3JkZXIgPT4gKHtcclxuICAgICAgLi4ub3JkZXIsXHJcbiAgICAgIHF1YW50aXR5OiBvcmRlci5xdWFudGl0eSB8fCAxLFxyXG4gICAgICBwcmljZV9NUlA6IG9yZGVyLnByaWNlX01SUCB8fCAwLFxyXG4gICAgICBwYXltZW50OiBvcmRlci5wYXltZW50IHx8IDAsXHJcbiAgICAgIHJhdGluZzogb3JkZXIucmF0aW5nIHx8IDAsXHJcbiAgICB9KSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coJ1dyaXRpbmcgY2xlYW5lZCBkYXRhIHRvIGZpbGVzJyk7XHJcbiAgICBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ3Byb2R1Y3RzLmpzb24nKSwgSlNPTi5zdHJpbmdpZnkoY2xlYW5Qcm9kdWN0cykpO1xyXG4gICAgZnMud3JpdGVGaWxlU3luYyhwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICdvcmRlcnMuanNvbicpLCBKU09OLnN0cmluZ2lmeShjbGVhbk9yZGVycykpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCdGaWxlcyB3cml0dGVuIHN1Y2Nlc3NmdWxseScpO1xyXG5cclxuICAgIC8vIExvZyBhIHN1bW1hcnkgb2Ygb3JkZXJzIGdyb3VwZWQgYnkgeWVhclxyXG4gICAgZm9yIChjb25zdCB5ZWFyIG9mIE9iamVjdC5rZXlzKG9yZGVyc0J5WWVhcikpIHtcclxuICAgICAgY29uc29sZS5sb2coYEZpbGUgb3JkZXJzLyR7eWVhcn0vKiBkb3dubG9hZGVkYCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnRVRMIGFuZCBkYXRhIGNvbXBpbGF0aW9uIHByb2Nlc3MgY29tcGxldGVkIHN1Y2Nlc3NmdWxseScgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGR1cmluZyBFVEwgYW5kIGRhdGEgY29tcGlsYXRpb24gcHJvY2VzczonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiU3RvcmFnZSIsInBhcnNlIiwiZnMiLCJwYXRoIiwiQlVDS0VUX05BTUUiLCJHT09HTEVfQVBQTElDQVRJT05fQ1JFREVOVElBTFMiLCJ0eXBlIiwicHJvamVjdF9pZCIsInByaXZhdGVfa2V5X2lkIiwicHJpdmF0ZV9rZXkiLCJjbGllbnRfZW1haWwiLCJjbGllbnRfaWQiLCJhdXRoX3VyaSIsInRva2VuX3VyaSIsImF1dGhfcHJvdmlkZXJfeDUwOV9jZXJ0X3VybCIsImNsaWVudF94NTA5X2NlcnRfdXJsIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJzdG9yYWdlIiwicHJvamVjdElkIiwiY3JlZGVudGlhbHMiLCJidWNrZXQiLCJwcm9kdWN0cyIsIm9yZGVyc0J5WWVhciIsImZpbGVzIiwiZ2V0RmlsZXMiLCJtYXAiLCJmaWxlIiwibmFtZSIsImRhdGEiLCJkb3dubG9hZCIsImluY2x1ZGVzIiwicHJvZHVjdERhdGEiLCJKU09OIiwidG9TdHJpbmciLCJwdXNoIiwieWVhck1hdGNoIiwibWF0Y2giLCJ5ZWFyIiwicGFyc2VkRGF0YSIsImNvbHVtbnMiLCJza2lwX2VtcHR5X2xpbmVzIiwiZGVsaW1pdGVyIiwicmVjb3JkIiwiaW5kZXgiLCJvcmRlcl9pZCIsImN1c3RvbWVyX2lkIiwicXVhbnRpdHkiLCJwYXJzZUludCIsInJlcGxhY2UiLCJwcmljZV9NUlAiLCJwYXJzZUZsb2F0IiwicGF5bWVudCIsInRpbWVzdGFtcCIsInJhdGluZyIsInByb2R1Y3RfY2F0ZWdvcnkiLCJwcm9kdWN0X2lkIiwicGF5bWVudF90eXBlIiwib3JkZXJfc3RhdHVzIiwicHJvZHVjdF93ZWlnaHRfZyIsInByb2R1Y3RfbGVuZ3RoX2NtIiwicHJvZHVjdF9oZWlnaHRfY20iLCJwcm9kdWN0X3dpZHRoX2NtIiwiY3VzdG9tZXJfY2l0eSIsImN1c3RvbWVyX3N0YXRlIiwic2VsbGVyX2lkIiwic2VsbGVyX2NpdHkiLCJzZWxsZXJfc3RhdGUiLCJwYXltZW50X2luc3RhbGxtZW50cyIsInBhcnNlRXJyb3IiLCJlcnJvciIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiYWxsT3JkZXJzIiwiT2JqZWN0IiwidmFsdWVzIiwiZmxhdCIsInByb2R1Y3RTZXQiLCJTZXQiLCJjbGVhblByb2R1Y3RzIiwiZmlsdGVyIiwicHJvZHVjdCIsImhhcyIsIm9iamVjdElEIiwiYWRkIiwiZGVzY3JpcHRpb24iLCJicmFuZCIsImNhdGVnb3JpZXMiLCJoaWVyYXJjaGljYWxDYXRlZ29yaWVzIiwibHZsMCIsImx2bDEiLCJsdmwyIiwibHZsMyIsInByaWNlIiwicHJpY2VfcmFuZ2UiLCJpbWFnZSIsInVybCIsImZyZWVfc2hpcHBpbmciLCJ1bmRlZmluZWQiLCJwb3B1bGFyaXR5Iiwib3JkZXJTZXQiLCJjbGVhbk9yZGVycyIsIm9yZGVyIiwid3JpdGVGaWxlU3luYyIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwic3RyaW5naWZ5Iiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/etl.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/etl.js"));
module.exports = __webpack_exports__;

})();